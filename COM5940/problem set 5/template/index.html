<!DOCTYPE html>
<html lang="en-US">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<title>User Points</title>
    <meta name="keywords" content="">
	<meta name="description" content="">
    <meta name="author" content="templatemo">
    <!--
	Medigo Template
	http://www.templatemo.com/preview/templatemo_460_medigo
    -->

	<!-- Google Fonts -->
	<link href="http://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic,700itali" rel="stylesheet">
	<link href="http://fonts.googleapis.com/css?family=Raleway:400,900,800,700,500,200,100,600" rel="stylesheet">

	<!-- Stylesheets -->
	<link rel="stylesheet" href="static/bootstrap/bootstrap.css">
	<link rel="stylesheet" href="static/css/misc.css">
	<link rel="stylesheet" href="static/css/red-scheme.css">
  <link rel="stylesheet" href="static/css/combined.css">
	<link rel="stylesheet" href="static/css/leaflet.css">

    <!-- DataTable C3 CSS -->
		<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap.min.css">
		<link rel="stylesheet" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css"
		<link href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.1.29/c3.css" rel="stylesheet" type="text/css">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.4/leaflet.css">
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.js"></script>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.1.29/c3.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.4/leaflet.js"></script>
		<script src="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/leaflet.markercluster.js"></script>

	<!-- JavaScripts -->
	<script src="static/js/jquery-1.10.2.min.js"></script>
	<script src="static/js/jquery-migrate-1.2.1.min.js"></script>
	<script src="static/js/leaflet.js"></script>
	<script src="https://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/leaflet.markercluster.js"></script>




	<link rel="shortcut icon" href="static/images/favicon.ico" type="image/x-icon" />
	<style type="text/css">
     body {
       padding: 0;
       margin: 0;
     }
     html, body, .container, .row, .col-xs-12, .col-sm-12, .col-md-12, #map {
       height: 100%;
     }
		 h3{
			 color:white
		 }
   </style>
</head>
<body>
	<div class="responsive_menu">
        <ul class="main_menu">
            <li><a href="index.html">Home</a></li>
            <li><a href="#">Portfolio</a>
            	<ul>
            		<li><a href="portfolio.html">Portfolio Grid</a></li>
            		<li><a href="project-image.html">Project Image</a></li>
            		<li><a href="project-slideshow.html">Project Slideshow</a></li>
            	</ul>
            </li>
            <li><a href="#">Blog</a>
				<ul>
					<li><a href="blog.html">Blog Standard</a></li>
					<li><a href="blog-single.html">Blog Single</a></li>
                    <li><a href="#">visit templatemo</a></li>
				</ul>
            </li>
            <li><a href="/logout">Logout</a></li>
            <li><a href="/login">Login</a></li>
        </ul> <!-- /.main_menu -->
    </div> <!-- /.responsive_menu -->

	<header class="site-header clearfix">
		<div class="container">

			<div class="row">

				<div class="col-md-12">

					<div class="pull-left logo">
						<a href="index.html">
							<img src="static/images/logo.png" alt="Medigo by templatemo">
						</a>
					</div>	<!-- /.logo -->

					<div class="main-navigation pull-right">

						<nav class="main-nav visible-md visible-lg">
							<ul class="sf-menu">
								<li class="active"><a href="index.html">Home</a></li>
					            <li><a href="#">Portfolio</a>
					            	<ul>
					            		<li><a href="portfolio.html">Portfolio Grid</a></li>
					            		<li><a href="project-image.html">Project Image</a></li>
					            		<li><a href="project-slideshow.html">Project Slideshow</a></li>
					            	</ul>
					            </li>
					            <li><a href="#">Blog</a>
									<ul>
										<li><a href="blog.html">Blog Standard</a></li>
										<li><a href="blog-single.html">Blog Single</a></li>
                                        <li><a href="#">visit templatemo</a></li>
									</ul>
					            </li>
											<li><a href="/logout">Logout</a></li>
					            <li><a href="/login">Login</a></li>
							</ul> <!-- /.sf-menu -->
						</nav> <!-- /.main-nav -->

						<!-- This one in here is responsive menu for tablet and mobiles -->
					    <div class="responsive-navigation visible-sm visible-xs">
					        <a href="#nogo" class="menu-toggle-btn">
					            <i class="fa fa-bars"></i>
					        </a>
					    </div> <!-- /responsive_navigation -->

					</div> <!-- /.main-navigation -->

				</div> <!-- /.col-md-12 -->

			</div> <!-- /.row -->

		</div> <!-- /.container -->
	</header> <!-- /.site-header -->

	<section id="homeIntro" class="parallax first-widget">
	    <div class="parallax-overlay">
		    <div class="container home-intro-content">
		        <div class="row">
		        	<div class="col-md-12">
		        		<h2>Map</h2>
								<h3>This map shows the most famous movie-shooting places in the world.</h3>
								<div class="container">
						      <div class="row">
						        <div class="col-xs-12 col-sm-12 col-md-12">
						          <center><div id="map" style="width: 800px; height: 440px; border: 1px solid #AAA;"></div></center>
						          <button type="button" class="btn btn-warning" id='roll_up' onclick="show_districts();">Show Districts</button><br>
						        </div>
						      </div>
						    </div>


		        	</div> <!-- /.col-md-12 -->
		        </div> <!-- /.row -->
		    </div> <!-- /.container -->
	    </div> <!-- /.parallax-overlay -->
	</section> <!-- /#homeIntro -->



	<!-- Scripts -->
	<script src="static/js/min/plugins.min.js"></script>
	<script src="static/js/min/medigo-custom.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	<script src="static/js/combined.js"></script>
	<script src="static/js/leaflet.js"></script>

	<script>
	var mapboxTiles = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {attribution: 'Map data &copy; <a href="https://openstreetmap.org">OpenStreetMap</a>', maxZoom: 18,})

	var map = L.map('map')
				.addLayer(mapboxTiles)
				.setView([51, 0], 2);

	var items = [];
	var airtable_read_endpoint = "https://api.airtable.com/v0/app9cDRUSwu89KSQR/Table%201?api_key=keyoBP8I4GOGpxbjZ";
	var data = [];
	$.getJSON(airtable_read_endpoint, function(result) {
				 $.each(result.records, function(key,value) {
						 items = {};
								 items["name"] = value.fields.Name;
								 items["url"] = value.fields.url;
								 items["image_url"] = value.fields.image_url;
								 items["latitud"] = value.fields.Lat;
								 items["longitud"] = value.fields.Lng;
								 data.push(items);
								 console.log(items);
					}); // end .each
	}); // end getJSON
</script>
<script>
function show_districts(){

for (var i in data) {
	var Icon = L.icon({
iconUrl: 'static/images/marker.png',

iconSize:     [40, 40], // size of the icon
iconAnchor:   [0, 0], // point of the icon which will correspond to marker's location
popupAnchor:  [-3, -76] // point from which the popup should open relative to the iconAnchor
});


		var latlng = L.latLng({ lat: data[i].latitud, lng: data[i].longitud });
		L.marker( latlng, {icon: Icon} )
				.bindPopup( '<a href="' + data[i].url + '" target="_blank">' + '<img src="' + data[i].image_url+'" width = "80px"><br>'+data[i].name + '</a>'  )
				.addTo(map);
}
}
</script>

<style>
#map {
	width: 960px;
	height:500px;
}

/* css to customize Leaflet default styles  */
.custom .leaflet-popup-tip,
.custom .leaflet-popup-content-wrapper {
	background: #e93434;
	color: #ffffff;
}
</style>


</body>
</html>
